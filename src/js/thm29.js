/*
 * Theme 29 Version 2 by https://yeoli-thm.tumblr.com/
 * Copyright (c) 2021 yeoli-thm
 */

!function(t){t.fn.exists=function(){return this.length>0};var o=window.getComputedStyle(document.body).getPropertyValue("--photosetGutterSize");function i(){t(".post:not(.appended)").each(function(){var o=t(this);o.find("figure").each(function(){null==t(this).attr("class")&&null!=t(this).attr("data-orig-width")||null!=t(this).attr("data-tumblr-attribution")?t(this).wrap('<div class="npf-wrap-single"/>'):"tmblr-full"!=t(this).attr("class")||t(this).parents(".npf_row").exists()||null!=t(this).attr("data-tumblr-attribution")||t(this).addClass("npf-item")}),o.find(".npf_row").each(function(){t(this).addClass("npf-item");var o=t(this).first(".npf_col").find("a.post_media_photo_anchor").attr("data-big-photo-height"),i=t(this).first(".npf_col").find("a.post_media_photo_anchor").attr("data-big-photo-width"),n=Math.floor(o/i*100);t(this).find(".tmblr-full").css("padding-bottom",n+"%")}),o.find(".npf-item").not(".npf-item + .npf-item").each(function(){t(this).nextUntil(":not(.npf-item)").addBack().wrapAll('<div class="npf-wrap-all"/>')}),o.addClass("appended")})}function n(){t(".photo-slideshow:not(.processed)").pxuPhotoset({lightbox:!0,highRes:!0,rounded:!1,exif:!1,captions:!1,gutter:o,photoset:".photo-slideshow",photoWrap:".photo-data",photo:".pxu-photo"})}function e(o){t(".tmblr-embed:not(.processed)").each(function(){var i=t(this);if(i.find(".instagram-media").exists()){if(i.addClass("processed"),t("#ifntscroll").exists()){console.log("infinite scroll yes");var n=0,e=setInterval(function(){n<5?(++n,o.masonry("layout")):clearInterval(e)},1e3)}}else{var s=i.find("iframe").width(),a=i.find("iframe").height(),r=Math.floor(a/s*100)+"%";i.find("iframe").wrap('<div class="vid-resize"/>'),i.find(".vid-resize").css({"padding-Bottom":r}),i.addClass("processed")}})}function s(){t("[title]").tooltipster({anchor:"top-left",offset:[14,-18],plugins:["follower"],animationDuration:300,delay:200,maxWidth:160,updateAnimation:null,trigger:"custom",triggerOpen:{click:!0,mouseenter:!0,tap:!1,touchstart:!1},triggerClose:{click:!1,mouseleave:!0,originClick:!1,scroll:!0,tap:!0,touchleave:!0}})}s(),t.tooltipster.group("tooltip"),t("body").on("mouseover",".description, .post-note",s);var a=t("#grid").masonry({itemSelector:".post",columnWidth:".post",gutter:".post-gutter",fitWidth:!0});if(i(),t(".npf_row").each(function(){t(this).addClass("clickable")}),n(),e(a),a.imagesLoaded().progress(function(){a.masonry("layout")}),t("#ifntscroll").exists()){var r=a.data("masonry");a.infiniteScroll({append:".post",path:"a#next",status:".page-load-status",outlayer:r,prefill:!0}),a.on("append.infiniteScroll",function(o,r,l,d){s(),t.tooltipster.group("tooltip"),i(),t(".npf_row:not(.clickable):not(.disabled)").each(function(){t(this).addClass("disabled")}),n(),e(a);var p=t(d).map(function(){return t(this).attr("id")}).get();Tumblr.LikeButton.get_status_by_post_ids(p),a.imagesLoaded().progress(function(){a.masonry("layout")})})}t("#sidebar").each(function(){var o=t(this),i=o.find(".menu-button span"),n=o.find(".sidebar-body");i.click(function(){n.hasClass("open")?(n.removeClass("open").toggle(400),i.attr("class","bx bx-plus").tooltipster("content","Menu")):(n.addClass("open").toggle(400),i.attr("class","bx bx-minus").tooltipster("content","Close"))})}),t(window).scroll(function(){t(window).scrollTop()>300?t("#top-button").fadeIn(400):t("#top-button").fadeOut(400)}),t("#top-button").click(function(){return t("body,html").animate({scrollTop:0},600),!1})}(jQuery);
