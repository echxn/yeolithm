/*
 * ZOLA THEME by https://yeolithm.com/
 * Copyright (c) 2023 yeoli-thm
 */
 
!function(t){t.fn.exists=function(){return this.length>0};var e=window.getComputedStyle(document.body),s=e.getPropertyValue("--photosetGutterSize"),i={background:"rgba(0,0,0,0)",color:e.getPropertyValue("--audioPlayerButtonColor")},a=t(window),o=t("body"),n=o.find("#sidebar-left"),r=n.find("#menu"),d=n.find(".menu_spinner a"),l=45,f=o.find("#sidebar-right"),c=f.find("#pagination"),p=f.find("#searchbar"),u=f.find("a.search_button"),g=f.find(".scrolltop_button");function h(){t("[title]").tooltipster({anchor:"top-left",offset:[14,-18],plugins:["follower"],animationDuration:300,delay:100,updateAnimation:null,trigger:"custom",triggerOpen:{click:!0,mouseenter:!0,tap:!1,touchstart:!1},triggerClose:{click:!1,mouseleave:!0,originClick:!1,scroll:!0,tap:!0,touchleave:!0}})}if(t.fn.photoset=function(){return this.find(".photo-slideshow:not(.processed)").pxuPhotoset({lightbox:!0,highRes:!0,rounded:!1,exif:!1,captions:!1,gutter:s,photoset:".photo-slideshow",photoWrap:".photo-data",photo:".pxu-photo"})},t.fn.video=function(){return this.find(".tmblr-embed:not(.processed)").each(function(){let e=t(this);if(e.find(".instagram-media").exists())e.addClass("processed");else{let s=e.find("iframe").width(),i=e.find("iframe").height();e.find("iframe").wrap('<div class="vid-resize"/>'),e.find(".vid-resize").css({"padding-Bottom":Math.floor(i/s*100)+"%"}),e.addClass("processed")}})},h(),t.tooltipster.group("tooltip"),o.on("mouseover",".sidebar-inner, .notes",h),t(".post").each(function(){var e,s=t(this);s.photoset(),s.video(),(e=s).find("iframe.tumblr_audio_player:not(.processed)").load(function(){var e=t(this);e.contents().find(".audio-player").css(i).find(".progress").css({background:"rgba(0,0,0,0)"}),e.css({opacity:"1"}).addClass("processed")}),e.find(".audio-caption:not(.processed)").each(function(){var e=t(this);e.find(".album-cover").exists()&&e.find(".album-cover").wrap('<div class="audioart"></div>'),e.prepend('<div class="audiobox"><div class="svgaudiobutton"><svg class="playbutton"><use xlink:href="#playButton"/></svg><svg class="pausebutton"><use xlink:href="#pauseButton"/></svg></div></div>');var s=e.find(".svgaudiobutton"),i=e.next("audio").children("source").attr("src"),a=new Audio(i);a.addEventListener("canplay",function(){s.addClass("playable")}),a.addEventListener("timeupdate",function(){var t=a.duration;a.currentTime==t&&s.removeClass("playing").addClass("paused")}),s.click(function(){!1==a.paused?(s.removeClass("playing").addClass("paused"),a.pause()):(s.removeClass("paused").addClass("playing"),a.play())}),e.addClass("processed")}),"text"==s.attr("data-post-type")&&(s.find(".npf-wrap-all").exists()||s.find(".npf-wrap-single").exists()?s.find(".origin .fx-file-text").toggleClass("fx-file-text fx-image"):s.find("p.npf_quote").exists()?s.find(".origin .fx-file-text").toggleClass("fx-file-text fx-sun"):s.find(".npf-link-block").exists()?s.find(".origin .fx-file-text").toggleClass("fx-file-text fx-link-2"):s.find("p.npf_chat").exists()&&s.find(".origin .fx-file-text").toggleClass("fx-file-text fx-users")),s.addClass("appended")}),d.click(function(t){t.preventDefault(),l+=90,r.css({"-webkit-transform":"rotate("+l+"deg)","-moz-transform":"rotate("+l+"deg)","-ms-transform":"rotate("+l+"deg)",transform:"rotate("+l+"deg)"})}),c.exists()){var v=c.find(".current"),x=parseInt(v.attr("data-current"));x<=9?v.text("0"+x):v.text(x)}u.click(function(t){t.preventDefault(),o.hasClass("search--open")?(o.removeClass("search--open"),p.delay(400).hide(0)):(p.show(0),o.addClass("search--open"))}),a.scroll(function(){var e=t(this).scrollTop();e>200&&!g.hasClass("activated")?g.addClass("activated"):e<=200&&t(".scrolltop_button").hasClass("activated")&&g.removeClass("activated")}),g.click(function(e){e.preventDefault(),t("html,body").animate({scrollTop:0},400)})}(jQuery);
