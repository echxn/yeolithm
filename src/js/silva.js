/*
 * SILVA THEME by https://yeoli-thm.tumblr.com/
 * Copyright (c) 2021 yeoli-thm
 */

!function(t){t.fn.exists=function(){return this.length>0};var e=window.getComputedStyle(document.body),n=parseInt(e.getPropertyValue("--current-page-number"),10),o=e.getPropertyValue("--post-photoset-gutter-size"),i={background:"rgba(0,0,0,0)",color:e.getPropertyValue("--post-audio-text-color")},a=t(window),s=t("body"),r=(t("body.index-page").exists(),t("body.load-ifnt").exists()),l=t("#backtotop"),d=s.find(".tmblrctrls-item"),c=d.find("a#tmblrctrls-button"),p=d.find("#tmblrctrls-box"),f=s.find("a#search-button"),u=s.find("#searchbox"),h=u.find("a#search-close-button"),m=u.find(".searchquery"),g=null;function b(){t("[title]").tooltipster({anchor:"top-left",offset:[14,-18],plugins:["follower"],animationDuration:300,delay:100,maxWidth:160,updateAnimation:null,trigger:"custom",triggerOpen:{click:!0,mouseenter:!0,tap:!1,touchstart:!1},triggerClose:{click:!1,mouseleave:!0,originClick:!1,scroll:!0,tap:!0,touchleave:!0}})}function v(){b(),t.tooltipster.group("tooltip"),s.on("mouseover",".blog-description, .notes",b)}function x(){t(".post-item:not(.appended)").each(function(){var e=t(this),n=t(this).attr("id");if("normal"==e.attr("data-post-category")){var o=e.attr("data-month");if(o!=g)e.wrap('<div class="month-group"></div>'),e.parent(".month-group").prepend('<div class="leftbar month-label"><h1>'+o+"</h1></div>"),g=o;else if(o==g){var i=e.prevAll(".month-group").first();e.appendTo(i)}}if(e.find(".timeago").timeAgo({time:"letter",spaces:!0}),e.hasClass("has-notes")){var a=e.find("#notes-button-"+n),s=e.find("#notes-wrapper-"+n);a.click(function(e){e.preventDefault(),a.hasClass("open")?(s.slideUp(300),a.tooltipster("content","View notes").removeClass("open")):(s.slideDown(300,function(){s.find(".notes_holder.unprocessed").exists()&&t.ajax({url:a.attr("data-notes-url"),success:function(t){s.find(".notes_loader").hide(),s.find(".notes_holder").html(t).slideDown().removeClass("unprocessed")}})}),a.tooltipster("content","Hide notes").addClass("open"))})}return e.photoset(),e.video(),e.audio(),function(e){e.find("figure").each(function(){null==t(this).attr("class")&&null!=t(this).attr("data-orig-width")||null!=t(this).attr("data-tumblr-attribution")?t(this).wrap('<div class="npf-wrap-single"/>'):"tmblr-full"!=t(this).attr("class")||t(this).parents(".npf_row").exists()||null!=t(this).attr("data-tumblr-attribution")||t(this).addClass("npf-item")}),e.find(".npf_row").each(function(){t(this).addClass("npf-item");var e=t(this).first(".npf_col").find("a.post_media_photo_anchor").attr("data-big-photo-height"),n=t(this).first(".npf_col").find("a.post_media_photo_anchor").attr("data-big-photo-width"),o=Math.floor(e/n*100);t(this).find(".tmblr-full").css("padding-bottom",o+"%")}),e.find(".npf-item").not(".npf-item + .npf-item").each(function(){t(this).nextUntil(":not(.npf-item)").addBack().wrapAll('<div class="npf-wrap-all"/>')})}(e),e.addClass("appended"),this})}function C(){var e=a.height(),n=a.scrollTop()+e+80;t(".not-visible").each(function(){var e=t(this),o=e.parents('[id$="-tab"]').data("tab-label");t("#"+o+"-check").is(":checked")&&(e.offset().top<n&&e.addClass("is-visible").removeClass("not-visible"));return this})}function w(){t(".npf_row").each(function(){t(this).addClass("clickable")})}if(t.fn.photoset=function(){return this.find(".photo-slideshow:not(.processed)").pxuPhotoset({lightbox:!0,highRes:!0,rounded:!1,exif:!1,captions:!1,gutter:o,photoset:".photo-slideshow",photoWrap:".photo-data",photo:".pxu-photo"})},t.fn.video=function(){return this.find(".tmblr-embed:not(.processed)").each(function(){var e=t(this);if(e.find(".instagram-media").exists())e.addClass("processed");else{var n=e.find("iframe").width(),o=e.find("iframe").height(),i=Math.floor(o/n*100)+"%";e.find("iframe").wrap('<div class="vid-resize"/>'),e.find(".vid-resize").css({"padding-Bottom":i}),e.addClass("processed")}})},t.fn.audio=function(){return this.find("iframe.tumblr_audio_player").load(function(){var e=t(this);e.contents().find(".audio-player").css(i).find(".progress").css({background:"rgba(0,0,0,0)"}),e.css({opacity:"1"})})},v(),1!==t("#panelbar .panelbar").children().length&&s.addClass("has-panelbar"),r){var k=t("#main"),y=t("#page_number").find(".currentpage"),S=0;S=n<=9?"0"+n.toString():n.toString(),y.text(S),x(),C(),w(),k.infiniteScroll({path:"a#next",append:"#main .post-item",status:".page-load-status",prefill:!0,scrollThreshold:600}),k.on("append.infiniteScroll",function(e,o,i,a){S=(n+=1)<=9?"0"+n.toString():n.toString(),y.text(S),x(),t(".npf_row:not(.clickable):not(.disabled)").each(function(){t(this).addClass("disabled")});var s=t(a).map(function(){return t(this).attr("id")}).get();Tumblr.LikeButton.get_status_by_post_ids(s),v()})}else{var T=t("#pagination"),D=n+1,I=n-1;D=D<=9?"0"+D.toString():D.toString(),I=I<=9?"0"+I.toString():I.toString(),T.find(".nextnum").text(D),T.find(".prevnum").text(I),x(),C(),w()}t('input[name="toggletab"]').change(function(){r&&(t("input#blog-check").is(":checked")?k.infiniteScroll("option",{scrollThreshold:600,loadOnScroll:!0}):k.infiniteScroll("option",{scrollThreshold:!1,loadOnScroll:!1})),t("body,html").animate({scrollTop:0},0),C()});var O=_.debounce(function(){C()},300);a.resize(O);var z=_.throttle(function(){var e=t(this).scrollTop();C(),e>200&&"none"==l.css("display")?l.fadeIn(200):e<=200&&"none"!==l.css("display")&&l.fadeOut(200)},100);a.scroll(z),l.click(function(e){return e.preventDefault(),t("body,html").animate({scrollTop:0},600),!1}),c.click(function(t){t.preventDefault(),p.hasClass("active")?(p.removeClass("active"),c.tooltipster("content","Tumblr controls").find("span").attr("class","fx fx-settings")):(p.addClass("active"),c.tooltipster("content","Close").find("span").attr("class","fx fx-x"))}),f.click(function(t){t.preventDefault(),u.fadeIn(300).addClass("active"),m.focus()}),h.click(function(t){t.preventDefault(),u.fadeOut(0).removeClass("active")}),a.load(function(){var e=0,n=setInterval(function(){e<10&&(t(".iframe-controls--desktop").exists()||t(".iframe-controls--phone-mobile").exists())?(clearInterval(n),d.removeClass("hidden"),t(".tmblr-iframe--loaded").clone().appendTo(p)):10===e&&(clearInterval(n),d.remove()),e++},1e3)})}(jQuery);
