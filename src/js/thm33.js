/*
 * Theme 33 by https://yeoli-thm.tumblr.com/
 * Copyright (c) 2021 yeoli-thm
 */

$(document).ready(function(){$.fn.exists=function(){return this.length>0};var t=window.getComputedStyle(document.body).getPropertyValue("--photosetGutterSize");function e(){$("[title]").tooltipster({anchor:"top-left",offset:[14,-18],plugins:["follower"],animationDuration:300,delay:200,maxWidth:160,updateAnimation:null,trigger:"custom",triggerOpen:{click:!0,mouseenter:!0,tap:!1,touchstart:!1},triggerClose:{click:!1,mouseleave:!0,originClick:!1,scroll:!0,tap:!0,touchleave:!0}})}$.fn.photoset=function(){return this.find(".photo-slideshow:not(.processed)").pxuPhotoset({lightbox:!0,highRes:!0,rounded:!1,exif:!1,captions:!1,gutter:t,photoset:".photo-slideshow",photoWrap:".photo-data",photo:".pxu-photo"})},$.fn.video=function(){return this.find(".tmblr-embed:not(.processed)").each(function(){let t=$(this);if(t.find(".instagram-media").exists())t.addClass("processed");else{let e=t.find("iframe").width(),o=t.find("iframe").height(),i=Math.floor(o/e*100)+"%";t.find("iframe").wrap('<div class="vid-resize"/>'),t.find(".vid-resize").css({"padding-Bottom":i}),t.addClass("processed")}})},e(),$.tooltipster.group("tooltip"),$("body").on("mouseover",".description, .notes-wrapper",e),$(".links-btn a").click(function(t){t.preventDefault(),$(".links").slideToggle(300)}),$(".posts:not(.appended)").each(function(){var t=$(this),e=t.find(".post-tags"),o=t.find(".notes-wrapper"),i=t.find(".post-buttons");!function(t){t.find("figure").each(function(){null==$(this).attr("class")&&null!=$(this).attr("data-orig-width")||null!=$(this).attr("data-tumblr-attribution")?$(this).wrap('<div class="npf-wrap-single"/>'):"tmblr-full"!=$(this).attr("class")||$(this).parents(".npf_row").exists()||null!=$(this).attr("data-tumblr-attribution")||$(this).addClass("npf-item")}),t.find(".npf_row").each(function(){$(this).addClass("npf-item");var t=$(this).first(".npf_col").find("a.post_media_photo_anchor").attr("data-big-photo-height"),e=$(this).first(".npf_col").find("a.post_media_photo_anchor").attr("data-big-photo-width"),o=Math.floor(t/e*100);$(this).find(".tmblr-full").css("padding-bottom",o+"%")}),t.find(".npf-item").not(".npf-item + .npf-item").each(function(){$(this).nextUntil(":not(.npf-item)").addBack().wrapAll('<div class="npf-wrap-all"/>')})}(t),t.photoset(),t.video(),i.find(".more-btn a").click(function(t){t.preventDefault(),i.hasClass("open")?(i.removeClass("open"),i.find(".more-btn").tooltipster("content","more"),o.exists()&&o.slideUp(300),e.exists&&e.hasClass("ttag")&&e.slideUp(300)):(i.addClass("open"),i.find(".more-btn").tooltipster("content","close"),e.exists&&e.hasClass("ttag")&&e.slideDown(300))}),t.find(".notes-btn a").click(function(e){e.preventDefault();var i=$(this).parent();"none"==o.css("display")?(i.tooltipster("content","hide notes"),o.slideDown(300,function(){o.find(".notes-container").hasClass("unprocessed")&&$.ajax({url:t.attr("data-notes-url"),success:function(t){o.find(".notes-loader").hide(),o.find(".notes-container").html(t).slideDown().removeClass("unprocessed")}})})):(i.tooltipster("content","view notes"),o.slideUp(300))}),t.addClass("appended")})});
