/*
 * Moonrise Theme by https://yeoli-thm.tumblr.com/
 * Copyright (c) 2021 yeoli-thm
 */
 
!function(t){function e(){n[0].scrollWidth>n.width()?n.kinetic("attach"):n.kinetic("detach")}function i(){t("[title]").tooltipster({anchor:"top-left",offset:[14,-18],plugins:["follower"],animationDuration:300,delay:200,maxWidth:160,updateAnimation:null,trigger:"custom",triggerOpen:{click:!0,mouseenter:!0,tap:!1,touchstart:!1},triggerClose:{click:!1,mouseleave:!0,originClick:!1,scroll:!0,tap:!0,touchleave:!0}})}function o(){t(".iframe-controls--desktop").exists()||t(".iframe-controls--phone-mobile").exists()?(t(".tmblr-controls-wrapper").removeClass("hidden"),t(".tmblr-iframe--loaded").clone().appendTo(".tmblr-controls-content"),t(".tmblr-controls-button").click(function(){t("#updates-button").exists()&&t("#updates-button").prop("checked",!1)})):setTimeout(o,500)}t.fn.exists=function(){return this.length>0},t.fn.npfFix=function(){return this.each(function(){var e=t(this);e.find("figure").each(function(){null==t(this).attr("class")&&null!=t(this).attr("data-orig-width")||null!=t(this).attr("data-tumblr-attribution")?t(this).wrap('<div class="npf-wrap-single"/>'):"tmblr-full"!=t(this).attr("class")||t(this).parents(".npf_row").exists()||null!=t(this).attr("data-tumblr-attribution")||t(this).addClass("npf-item")}),e.find(".npf_row").each(function(){t(this).addClass("npf-item");var e=t(this).first(".npf_col").find("a.post_media_photo_anchor").attr("data-big-photo-height"),i=t(this).first(".npf_col").find("a.post_media_photo_anchor").attr("data-big-photo-width"),o=Math.floor(e/i*100);t(this).find(".tmblr-full").css("padding-bottom",o+"%")}),e.find(".npf-item").not(".npf-item + .npf-item").each(function(){t(this).nextUntil(":not(.npf-item)").addBack().wrapAll('<div class="npf-wrap-all"/>')})})},t.fn.photoset=function(){return this.each(function(){var e=t(this).find(".photo-slideshow:not(.processed)");e.exists()&&e.pxuPhotoset({lightbox:!0,highRes:!0,rounded:!1,exif:!1,captions:!1,gutter:"4px",photoset:".photo-slideshow",photoWrap:".photo-data",photo:".pxu-photo"})})},t.fn.video=function(){return this.each(function(){var e=t(this).find(".tmblr-embed:not(.processed)");if(e.exists())if(e.find(".instagram-media").exists())e.addClass("processed");else{var i=e.find("iframe").width(),o=e.find("iframe").height(),s=Math.floor(o/i*100)+"%";e.find("iframe").wrap('<div class="vid-resize"/>'),e.find(".vid-resize").css({"padding-Bottom":s}),e.addClass("processed")}})},t(window).load(function(){t(".tmblr-iframe").exists()&&o()});var s,a=t("body"),n=t("#navigation"),l=n.offset().top,r=window.matchMedia("(min-width: 768px)").matches;r?a.addClass("desktop"):a.addClass("mobile"),i(),t(".post").npfFix().photoset().video(),n.find('a[data-page$="-page"]').click(function(e){e.preventDefault();var i=t(this).attr("data-page");$selected=t(".selected"),t(window).scrollTop(0),a.hasClass(i)?(a.removeClass(i),$selected.length>0&&$selected.addClass("current-page")):(a.removeClass("likes-page following-page").addClass(i),$selected.length>0&&$selected.removeClass("current-page"))}),0===document.location.pathname.indexOf("/post/")?n.find(".posts-link").addClass("current-page selected"):n.find("a:not(.posts-link)").each(function(){var e=t(this),i=e.attr("href",encodeURI(t(this).attr("href"))).attr("href");0===document.location.pathname.indexOf(i)&&e.addClass("current-page selected")}),t(window).scroll(function(){t(window).scrollTop()-60>=l?(n.addClass("fixed"),t("#navigation-shadow").show(0),a.hasClass("desktop")&&t("#to-top").fadeIn(400)):(n.removeClass("fixed"),t("#navigation-shadow").hide(0),t("#to-top").fadeOut(400))}),n.kinetic({cursor:"default",filterTarget:function(t,e){if(!/down|start/.test(e.type))return!/area|a|input/i.test(t.tagName)}}),e(),t(".topbar-buttons label").click(function(){t(this).tooltipster("close")}),t("#to-top").click(function(){return t("body,html").animate({scrollTop:0},600),!1}),a.on("mouseover","#header, .notes-wrapper",i),t(".topbar-buttons label").click(function(){t(this).tooltipster("close")}),t(window).resize(function(){clearTimeout(s),s=setTimeout(function(){(r=window.matchMedia("(min-width: 768px)").matches)&&a.hasClass("mobile")?a.removeClass("mobile").addClass("desktop"):!r&&a.hasClass("desktop")&&a.removeClass("desktop").addClass("mobile"),e()},500)})}(jQuery);
