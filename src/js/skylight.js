/*
 * SKYLIGHT THEME by https://yeoli-thm.tumblr.com/
 * Copyright (c) 2023 yeoli-thm
 */

!function(t){t.fn.exists=function(){return this.length>0};let e={width:14,height:14,"stroke-width":2};var a=window.getComputedStyle(document.body);let i=a.getPropertyValue("--photosetGutterSize"),s={background:"rgba(0,0,0,0)",color:a.getPropertyValue("--audioPlayerTextColor")},o=a.getPropertyValue("--showToggleTagsLabel").slice(1,-1),l=a.getPropertyValue("--closeLabel").slice(1,-1),n=a.getPropertyValue("--readMoreLabel").slice(1,-1),r=window.location.href;var d=t(window),c=t("body"),p=c.find(".modebtn a"),f=c.find(".controlsbtn a"),h=c.find(".controlsbox"),u=c.find(".searchbtn a"),v=c.find("#search-wrapper"),b=v.find(".searchquery"),g=v.find("a.searchclose"),m=0,$=0,C=c.attr("data-tab"),w=c.find(".tabbar-shadow"),y=c.find("#tabbar"),x=y.find("#dropmenu"),k=y.find(".dropbtn"),L=c.find("#highlighted"),P=c.find("#recentlikes");c.find("#about");var S=c.find("#navigate"),V=c.find("#following"),D=c.find("#to-top");function N(){t("[title]").tooltipster({anchor:"top-left",offset:[14,-18],plugins:["follower"],animationDuration:300,delay:100,updateAnimation:null,trigger:"custom",triggerOpen:{click:!0,mouseenter:!0,tap:!1,touchstart:!1},triggerClose:{click:!1,mouseleave:!0,originClick:!1,scroll:!0,tap:!0,touchleave:!0}})}function A(t,a){if("image"==a.type){var i=a.media;let s=i[0].url;t.attr("data-post-type",a.type),t.find(".ld_thumbody").html('<figure class="ld_photo"><img src="'+s+'" alt="image"/></figure>')}else if("video"==a.type){var i=a.poster;let o=null!==i[0].url?i[0].url:"";t.attr("data-post-type",a.type),t.find(".ld_thumbody").html('<figure class="ld_photo"><img src="'+o+'" alt="video"/></figure><div class="ld_icon"><i data-feather="video" aria-hidden="true"></i></div>'),feather.replace(e)}else if("audio"==a.type){var i=a.poster;let l=null!==i[0].url?i[0].url:"",n=null!==a.artist?a.artist:"",r=null!==a.title?a.title:"";t.attr("data-post-type",a.type),t.find(".ld_thumbody").html('<div class="ld_audio"><div class="ld_audio_bg" style="background-image:url('+l+')"></div><div class="ld_audio_inner"><div class="ld_audio_trackname">'+r+'</div><div class="ld_audio_artist">'+n+'</div></div></div><div class="ld_icon"><i data-feather="music" aria-hidden="true"></i></div>'),feather.replace(e)}}if(t.fn.hoverEffect=function(){return this.each(function(){let e=t(this);e.find("span").contents().unwrap().wrap('<div class="lettering"/>');var a=e.find(".lettering"),i="",s=a.html();if(void 0!==s){var o=s.length;s=s.split("");for(var l=0;l<o;l++)i+='<span class="char" data-char="'+l+'">'+s[l]+"</span>";a.html(i),e.find(".char").each(function(){var a,i=t(this),s=i.attr("data-char")*(250/o);e.hover(function(){a=setTimeout(function(){i.addClass("active")},s)},function(){clearTimeout(a),i.removeClass("active")})})}})},t.fn.readMore=function(){return this.find("a.read_more").each(function(){t(this).hasClass("tmblr-truncated-link")&&t(this).parent().addClass("read_more_container"),t(this).html("<span>"+n+"</span>")})},t.fn.photoset=function(){return this.find(".photo-slideshow:not(.processed)").pxuPhotoset({lightbox:!0,highRes:!0,rounded:!1,exif:!1,captions:!1,gutter:i,photoset:".photo-slideshow",photoWrap:".photo-data",photo:".pxu-photo"})},t.fn.video=function(){return this.find(".tmblr-embed:not(.processed)").each(function(){let e=t(this);if(e.find(".instagram-media").exists())e.addClass("processed");else{var a=e.find("iframe").attr("src");if(a.indexOf("www.youtube.com")>-1&&a.indexOf("embed"))var i="56%";else var s=e.find("iframe").width(),i=Math.floor(e.find("iframe").height()/s*100)+"%";e.find("iframe").wrap('<div class="vid-resize"/>'),e.find(".vid-resize").css({"padding-Bottom":i}),e.addClass("processed")}})},t.fn.npfChat=function(){return this.find(".npf_chat").each(function(){var e=t(this);e.prepend("<br>").append("<br>"),e.find("br").each(function(e){t(this).attr("class",e)});let a=e.children("br").length;for(let i=1;i<a;i++){var s=i-1,o=i,l=e.contents(),n=l.index(e.find('br[class="'+s+'"]')),r=l.index(e.find('br[class="'+o+'"]'));l.slice(n,r).wrapAll('<p class="post_chat">'),i==a-1&&(e.find("br").remove(),e.contents().unwrap())}})},!function t(){if(c.hasClass("modeswitch")){c.hasClass("dark")&&p.attr("title","Light mode");var e=localStorage.getItem("modeStatus");p.click(function(t){t.preventDefault(),"Light"==e?(c.toggleClass("light dark"),p.tooltipster("hide").tooltipster("content","Light mode"),e="Dark"):(c.toggleClass("dark light"),p.tooltipster("hide").tooltipster("content","Dark mode"),e="Light"),localStorage.modeStatus=e})}}(),r.indexOf("/ask")>-1?c.attr("data-page","ask"):r.indexOf("/submit")>-1&&c.attr("data-page","submit"),N(),t.tooltipster.group("tooltip"),c.on("mouseover",".notes, #about, #sidebar",N),feather.replace(e),c.addClass("loaded"),t(".hovereffect").hoverEffect(),t(".posts:not(.appended)").each(function(){let e=t(this);if(void 0!==e.attr("id")){var a,i,n,r,d,c;e.readMore().hoverEffect(),e.photoset(),e.video(),e.npfChat(),(a=e).find("iframe.tumblr_audio_player").load(function(){var e=t(this);e.contents().find(".audio-player").css(s).find(".progress").css({background:"rgba(0,0,0,0)"}),e.css({opacity:"1"})}),a.find(".audio-caption:not(.processed)").each(function(){var e=t(this),a=e.next("audio").children("source").attr("src"),i="",s="",o=e.find(".tmblr-audio-meta.title").exists()?'<p class="trackname">'+e.find(".tmblr-audio-meta.title").text()+"</p>":"",l=e.find(".tmblr-audio-meta.artist").exists()?'<p class="artist">'+e.find(".tmblr-audio-meta.artist").text()+"</p>":"";e.find("img.album-cover").exists()&&(s='<div class="album_art"><img src="'+(i=e.find("img.album-cover").attr("src"))+'" alt=""/></div>'),e.html('<div class="audio_bg" style="background-image:url('+i+')"></div><div class="audio_inner"><div class="player_container"><div class="svgaudiobutton"><svg class="playbutton"><use xlink:href="#playButton"/></svg><svg class="pausebutton"><use xlink:href="#pauseButton"/></svg></div></div><div class="audio_details">'+o+l+"</div>"+s+"</div>");var n=e.find(".svgaudiobutton"),r=new Audio(a);r.addEventListener("canplay",function(){n.addClass("playable")}),r.addEventListener("timeupdate",function(){var t=r.duration;r.currentTime==t&&n.removeClass("playing").addClass("paused")}),n.click(function(){!1==r.paused?(n.removeClass("playing").addClass("paused"),r.pause()):(n.removeClass("paused").addClass("playing"),r.play())}),e.addClass("processed")}),(i=e).find("figure").each(function(){void 0==t(this).attr("class")&&void 0!=t(this).attr("data-orig-width")||void 0!=t(this).attr("data-tumblr-attribution")?t(this).wrap('<div class="npf_photo_wrap_single"/>'):"tmblr-full"!=t(this).attr("class")||t(this).parents(".npf_row").exists()||void 0!=t(this).attr("data-tumblr-attribution")||t(this).addClass("npf_photo_item")}),i.find(".npf_row").each(function(){t(this).addClass("npf_photo_item")}),i.find(".npf_photo_item").not(".npf_photo_item + .npf_photo_item").each(function(){t(this).nextUntil(":not(.npf_photo_item)").addBack().wrapAll('<div class="npf_photo_wrap_group"/>')}),i.find('[class*="npf_photo_wrap_"] img:not(.post_media_photo)').each(function(){var e=t(this),a=e.attr("src"),i=e.attr("data-orig-height"),s=e.attr("data-orig-width");e.wrap('<a class="post_media_photo_anchor" data-big-photo="'+a+'" data-big-photo-height="'+i+'" data-big-photo-width="'+s+'"/>')}),d=(r=(n=e).find(".tag_btn")).find("a"),c=n.find(".post_tags_wrapper"),d.click(function(t){t.preventDefault(),r.hasClass("open")?(r.removeClass("open").tooltipster("content",o),c.slideUp(250)):(r.addClass("open").tooltipster("content",l),c.slideDown(250))})}return e.addClass("appended"),this}),t("main").each(function(){var e=document.createElementNS("http://www.w3.org/2000/svg","svg"),a=document.createElementNS("http://www.w3.org/2000/svg","symbol"),i=document.createElementNS("http://www.w3.org/2000/svg","symbol"),s=document.createElementNS("http://www.w3.org/2000/svg","path"),o=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttributeNS(null,"d","M3.947,20.834V3.166l16.105,8.833L3.947,20.834L3.947,20.834z"),a.setAttributeNS(null,"id","playButton"),a.setAttributeNS(null,"viewbox","0 0 24 24"),a.appendChild(s),o.setAttributeNS(null,"d","M3.897,3.6h6.569v16.8H3.897V3.6z M13.534,3.6h6.568v16.8h-6.568V3.6z"),i.setAttributeNS(null,"id","pauseButton"),i.setAttributeNS(null,"viewbox","0 0 24 24"),i.appendChild(o),e.setAttributeNS(null,"width","0"),e.setAttributeNS(null,"height","0"),e.appendChild(a),e.appendChild(i),t(this).append(e)}),u.click(function(t){t.preventDefault(),u.tooltipster("hide"),v.fadeIn(300),c.addClass("search--open"),b.val("").focus()}),g.click(function(t){t.preventDefault(),g.tooltipster("hide"),v.fadeOut(300),c.removeClass("search--open")}),D.click(function(e){e.preventDefault(),t("body,html").animate({scrollTop:0},400)}),x.children().length>1){var E=c.find("span.current_drop_selector");let O="ask"==c.attr("data-page")?a.getPropertyValue("--askLabel").slice(1,-1):"submit"==c.attr("data-page")?a.getPropertyValue("--submitLabel").slice(1,-1):a.getPropertyValue("--blogLabel").slice(1,-1),T=a.getPropertyValue("--topPhotosLabel").slice(1,-1),z=a.getPropertyValue("--recentLikesLabel").slice(1,-1),B=a.getPropertyValue("--aboutLabel").slice(1,-1),M=a.getPropertyValue("--navigateLabel").slice(1,-1),I=a.getPropertyValue("--followingLabel").slice(1,-1);var j=!1;O?(j=!0,document.write("<style>.current_drop_selector:before,#dropmenu a:before{display:none}</style>"),E.text(O),x.find("a.blog_label").text(O),x.find("a.highlighted_label").text(T),x.find("a.recentlikes_label").text(z),x.find("a.about_label").text(B),x.find("a.navigate_label").text(M),x.find("a.following_label").text(I)):console.log("empty"),L.exists()&&t(".topphoto_thumbnail:not(.appended)").each(function(){let e=t(this);var a=t(this).find("figure"),i=a.find("img"),s=i.attr("src");return s.includes("250x400/")?(s=s.replace("250x400/","1280x1920/"),a.load(s+" .J9AiF")):s.includes("_250.")&&(s=s.replace("_250.","_540."),i.attr("src",s)),e.addClass("appended"),this}),P.exists()&&t(".liked_thumbnail:not(.appended)").each(function(){let e=t(this);if("text"==e.attr("data-post-type")){var a=JSON.parse(e.find(".ld_npf_obj").text()),i=a.content,s=a.trail;if(i.length>0){var o=i[0];A(e,o)}else if(0===i.length&&s.length>0&&s[0].content.length>0){var o=s[0].content[0];A(e,o)}else e.find(".ld_npf_obj").remove()}return e.addClass("appended"),this}),S.exists()&&(S.find(".nav a").each(function(){t(this).wrapInner("<span/>").hoverEffect()}),S.find(".brandlogo ul").children().length<1&&S.find(".brandlogo").remove()),V.exists()&&function e(){var a=V.find("#following_searchbar"),i=a.find(".followingquery"),s=a.find(".followingclear"),o=V.find("ul#blogroll").find("li.blogroll_item"),l=V.find(".no_following_result"),n=l.find(".result_term"),r=c.find(".following_heading .num");let p=o.length;i.val(""),r.text(p),i.keyup(function(){var e=t(this).val().toLowerCase(),i=e.length;0===i||a.hasClass("active")?0===i&&a.hasClass("active")&&a.removeClass("active"):a.addClass("active");var s=o.hide().filter(function(){return t(this).attr("data-id").toLowerCase().substr(0,i).indexOf(e)>-1}).show().length;r.text(s),0===s?(n.text(e),l.show()):0!==s&&"block"==l.css("display")&&l.hide()}),s.click(function(t){t.preventDefault(),i.val("").parent("#following_searchbar").removeClass("active"),o.toggle(!0),l.add(s).hide(),r.text(p)}),o.each(function(){let e=t(this),a=e.find(".more_wrapper"),i=e.find("a.more_button");e.find(".more_options");let s=e.attr("data-id");i.on("click",function(e){e.preventDefault(),e.stopPropagation(),d.off("click"),a.hasClass("on")?a.removeClass("on"):(t('li.blogroll_item:not([data-id="'+s+'"]) .more_wrapper.on').removeClass("on"),a.addClass("on"),d.one("click",function(t){a.is(t.target)||0!==a.has(t.target).length||a.removeClass("on")}))})})}(),k.click(function(t){t.preventDefault(),c.hasClass("dd--open")?c.removeClass("dd--open"):c.addClass("dd--open")}),x.find("a").click(function(e){e.preventDefault();let a=t(this),i=a.attr("href").substring(1);if(c.attr("data-tab",i).removeClass("dd--open"),j)switch(i){case"highlighted":E.text(T);break;case"recentlikes":E.text(z);break;case"about":E.text(B);break;case"navigate":E.text(M);break;case"following":E.text(I);break;default:E.text(O)}return t("#"+C).animate({opacity:0},{duration:300,complete:function(){t(this).css("display","none"),t("#"+i).css({display:"block"}).animate({opacity:1},300)}}),C=i});var q=_.debounce(function(){let t=Math.ceil(w.offset().top);if(t!=$)return $=t},300);d.resize(q);var U=_.throttle(function(){let e=t(this).scrollTop();e>200&&!D.hasClass("visible")?D.addClass("visible").fadeIn(200):e<=200&&D.hasClass("visible")&&D.fadeOut(200).removeClass("visible");let a=Math.ceil(w.offset().top);$=a!=$?a:$;let i=$+72;e-m>0?e>i?(!c.hasClass("tb--fixed")&&(c.addClass("tb--fixed"),c.hasClass("dd--open")&&c.removeClass("dd--open")),c.hasClass("tb--visible")&&(c.removeClass("tb--visible tb--shadow"),c.hasClass("dd--open")&&setTimeout(function(){c.removeClass("dd--open")},300))):c.hasClass("tb--fixed")&&c.removeClass("tb--fixed tb--visible tb--shadow"):e-m<0&&(e>i?(c.hasClass("tb--fixed")||c.addClass("tb--fixed"),c.hasClass("tb--visible")||c.addClass("tb--visible"),c.hasClass("tb--shadow")||c.addClass("tb--shadow")):e>$&&e<=i?c.hasClass("tb--shadow")&&c.removeClass("tb--shadow"):c.hasClass("tb--fixed")&&c.removeClass("tb--fixed tb--visible tb--shadow")),m=e},100);d.scroll(U)}else{y.add(w).remove(),c.addClass("tb--none");var U=_.throttle(function(){let e=t(this).scrollTop();e>200&&!D.hasClass("visible")?D.addClass("visible").fadeIn(200):e<=200&&D.hasClass("visible")&&D.fadeOut(200).removeClass("visible")},100);d.scroll(U)}f.click(function(t){t.preventDefault(),c.hasClass("controls--open")?h.animate({opacity:0},{duration:0,complete:function(){c.removeClass("controls--open"),f.tooltipster("hide").tooltipster("content","Tumblr controls")}}):(c.addClass("controls--open"),h.animate({opacity:1},250),f.tooltipster("hide").tooltipster("content",l))}),d.load(function(){let e=0,a=setInterval(function(){e<10&&(t(".iframe-controls--desktop").exists()||t(".iframe-controls--phone-mobile").exists())?(clearInterval(a),t(".tmblr-iframe--loaded").clone().appendTo(h),c.find(".controlsbtn").show(0).removeClass("hidden")):10===e&&clearInterval(a),e++},1e3)})}(jQuery);
