/*
 * Theme 31 by https://yeoli-thm.tumblr.com/
 * Copyright (c) 2021 yeoli-thm
 */
 
!function(t){t.fn.exists=function(){return this.length>0};var i=window.getComputedStyle(document.body),o=i.getPropertyValue("--photosetGutterSize"),e={background:"rgba(0,0,0,0)",color:i.getPropertyValue("--postAudioTextColor")},n=t("body"),s=n.find("#topbar");function a(){t("[title]").tooltipster({anchor:"top-left",offset:[14,-18],plugins:["follower"],animationDuration:300,delay:100,maxWidth:160,updateAnimation:null,trigger:"custom",triggerOpen:{click:!0,mouseenter:!0,tap:!1,touchstart:!1},triggerClose:{click:!1,mouseleave:!0,originClick:!1,scroll:!0,tap:!0,touchleave:!0}})}t.fn.photoset=function(){return this.find(".photo-slideshow:not(.processed)").pxuPhotoset({lightbox:!0,highRes:!0,rounded:!1,exif:!1,captions:!1,gutter:o,photoset:".photo-slideshow",photoWrap:".photo-data",photo:".pxu-photo"})},t.fn.video=function(){return this.find(".tmblr-embed:not(.processed)").each(function(){var i=t(this);if(i.find(".instagram-media").exists())i.addClass("processed");else{var o=i.find("iframe").width(),e=i.find("iframe").height(),n=Math.floor(e/o*100)+"%";i.find("iframe").wrap('<div class="vid-resize"/>'),i.find(".vid-resize").css({"padding-Bottom":n}),i.addClass("processed")}})},t.fn.audio=function(){return this.find("iframe.tumblr_audio_player").load(function(){var i=t(this);i.contents().find(".audio-player").css(e).find(".progress").css({background:"rgba(0,0,0,0)"}),i.css({opacity:"1"})})},s.find(".credit").exists()||s.prepend('<a href="https://yeoli-thm.tumblr.com" class="credit tooltip" title="Theme" target="_blank"><span class="ent ent-cc-nd"></span></a>'),a(),t.tooltipster.group("tooltip"),n.on("mouseover",".notes",a),t("main#blog__panel .posts:not(.appended)").each(function(){var i=t(this);if(function(i){i.find("figure").each(function(){null==t(this).attr("class")&&null!=t(this).attr("data-orig-width")||null!=t(this).attr("data-tumblr-attribution")?t(this).wrap('<div class="npf-wrap-single"/>'):"tmblr-full"!=t(this).attr("class")||t(this).parents(".npf_row").exists()||null!=t(this).attr("data-tumblr-attribution")||t(this).addClass("npf-item")}),i.find(".npf_row").each(function(){t(this).addClass("npf-item");var i=t(this).first(".npf_col").find("a.post_media_photo_anchor").attr("data-big-photo-height"),o=t(this).first(".npf_col").find("a.post_media_photo_anchor").attr("data-big-photo-width"),e=Math.floor(i/o*100);t(this).find(".tmblr-full").css("padding-bottom",e+"%")}),i.find(".npf-item").not(".npf-item + .npf-item").each(function(){t(this).nextUntil(":not(.npf-item)").addBack().wrapAll('<div class="npf-wrap-all"/>')})}(i),i.photoset(),i.video(),i.audio(),i.find(".notes_btn").exists()){var o=i.find(".notes_wrapper"),e=i.find("a.notes_btn");e.click(function(n){n.preventDefault(),e.tooltipster("content","Hide notes").hasClass("active")?o.slideUp(300,function(){e.tooltipster("content","View notes").removeClass("active")}):(e.addClass("active"),o.slideDown(300,function(){o.find(".notes-holder.unprocessed").exists()&&t.ajax({url:i.attr("data-notes-url"),success:function(t){o.find(".notes-loader").hide(),o.find(".notes-holder").html(t).slideDown().removeClass("unprocessed")}})}))})}return i.addClass("appended"),this})}(jQuery);
