/*
 * Mimyo Theme by https://yeoli-thm.tumblr.com/
 * Copyright (c) 2021 yeoli-thm
 */
 
!function(t){t.fn.exists=function(){return this.length>0},t.fn.slideIn=function(){return this.show(0,function(){t(this).addClass("active")})},t.fn.slideOut=function(){return this.hide(0,function(){t(this).removeClass("active")})};var e=window.getComputedStyle(document.body).getPropertyValue("--post-photoset-gutter-size"),a=t(window),n=t("body"),o=t("body.index-page-home").exists(),s=t("body.not-index").exists(),i=t("body.manual").exists(),r=t("#topbar"),l=0,d=n.find(".scroll-top-inner"),f=n.find(".scroll-top-button"),c=r.find("#icon_display"),u=c.attr("data-blogname").slice(0,1),p=r.find("#controls-wrapper"),h=p.find("#controls"),m=null,g=null;if(i)var v=".load-more-button",b=!1,C=!1;else v=null,b=400,C=!0;function y(){t("[title]").tooltipster({anchor:"top-left",offset:[14,-18],plugins:["follower"],animationDuration:300,delay:100,maxWidth:160,updateAnimation:null,trigger:"custom",triggerOpen:{click:!0,mouseenter:!0,tap:!1,touchstart:!1},triggerClose:{click:!1,mouseleave:!0,originClick:!1,scroll:!0,tap:!0,touchleave:!0}})}function w(){y(),t.tooltipster.group("tooltip"),n.on("mouseover","#sidebar, .notes",y)}function x(e){t(".ifnt-item:not(.appended)").each(function(){var a=t(this);if(function(e){e.find("figure").each(function(){null==t(this).attr("class")&&null!=t(this).attr("data-orig-width")||null!=t(this).attr("data-tumblr-attribution")?t(this).wrap('<div class="npf-wrap-single"/>'):"tmblr-full"!=t(this).attr("class")||t(this).parents(".npf_row").exists()||null!=t(this).attr("data-tumblr-attribution")||t(this).addClass("npf-item")}),e.find(".npf_row").each(function(){t(this).addClass("npf-item");var e=t(this).first(".npf_col").find("a.post_media_photo_anchor").attr("data-big-photo-height"),a=t(this).first(".npf_col").find("a.post_media_photo_anchor").attr("data-big-photo-width"),n=Math.floor(e/a*100);t(this).find(".tmblr-full").css("padding-bottom",n+"%")}),e.find(".npf-item").not(".npf-item + .npf-item").each(function(){t(this).nextUntil(":not(.npf-item)").addBack().wrapAll('<div class="npf-wrap-all"/>')})}(a),o){if(a.hasClass("grid-date")){var s=a,i=s.attr("data-month"),r=s.attr("data-day");i!=m&&(s.find(".gd-month").addClass("new"),e.masonry("layout"),m=i),r!=g&&(s.find(".gd-day").addClass("new"),e.masonry("layout"),g=r)}else if(a.hasClass("grid-thumbnail")){var l=a.attr("data-thumbnailID"),d=t('.gd-overlay[data-overlayID="'+l+'"]'),f=t('.post[id="'+l+'"]'),c=t('.modal-wrapper[data-modalID="'+l+'"]');d.click(function(a){a.preventDefault(),n.addClass("overflow"),f.fadeIn(200,function(){f.photoset(),f.video(e),f.find(".notes-container:not(processed)").exists()&&t.ajax({url:f.attr("data-notesURL"),success:function(t){f.find(".notes-loader").hide(),f.find(".notes-container").html(t).slideDown().addClass("processed")}})})}),c.click(function(e){var a=t(e.target).attr("class");"modal-wrapper"!=a&&"modal-close"!=a||(e.preventDefault(),f.fadeOut(200,function(){n.removeClass("overflow")}))})}}else a.photoset(),a.video(e);return a.shareToggle(),a.addClass("appended"),this})}function _(){t(".npf_row").each(function(){t(this).addClass("clickable")})}if(t.fn.photoset=function(){return this.find(".photo-slideshow:not(.processed)").pxuPhotoset({lightbox:!0,highRes:!0,rounded:!1,exif:!1,captions:!1,gutter:e,photoset:".photo-slideshow",photoWrap:".photo-data",photo:".pxu-photo"})},t.fn.video=function(e){return this.find(".tmblr-embed:not(.processed)").each(function(){var a=t(this);if(a.find(".instagram-media").exists()){if(a.addClass("processed"),o)var n=0,s=setInterval(function(){n<5?(++n,e.masonry("layout")):5===n&&clearInterval(s)},1e3)}else{var i=a.find("iframe").width(),r=a.find("iframe").height(),l=Math.floor(r/i*100)+"%";a.find("iframe").wrap('<div class="vid-resize"/>'),a.find(".vid-resize").css({"padding-Bottom":l}),a.addClass("processed")}})},t.fn.shareToggle=function(){var t=this.find(".share_btn"),e=this.find(".share-wrapper");return t.click(function(a){a.preventDefault(),t.hasClass("on")?(t.removeClass("on"),e.slideOut()):(t.addClass("on"),e.slideIn())})},w(),s)x();else{if(o){x(I=t("#main").masonry({itemSelector:".grid-item",columnWidth:".grid-sizer",gutter:".grid-gutter",fitWidth:!0,hiddenStyle:{transform:"translateY(100px)",opacity:0},visibleStyle:{transform:"translateY(0px)",opacity:1}})),_(),I.imagesLoaded().progress(function(t){I.masonry("layout")}),I.one("layoutComplete",function(){t("#preloader").fadeTo(200,0,function(){t("#main").fadeTo(200,1)}).remove()});var k=I.data("masonry")}else{var I;k=null;x(I=t("#main")),_()}I.infiniteScroll({append:".ifnt-item",path:"a#next",status:".page-load-status",outlayer:k,button:v,scrollThreshold:b,prefill:C}),I.on("append.infiniteScroll",function(e,a,n,o){x(I),t(".npf_row:not(.clickable):not(.disabled)").each(function(){t(this).addClass("disabled")});var s=t(o).map(function(){return t(this).attr("id")}).get();Tumblr.LikeButton.get_status_by_post_ids(s),w()})}c.hasClass("toplogo")&&c.html('<span class="letter">'+u+'</span><span class="dot"></span>'),a.scroll(function(){var e=t(this).scrollTop();e-l>=4&&e>60?r.hasClass("is-hidden")||r.addClass("is-hidden"):(l-e>=4||e<=60)&&r.hasClass("is-hidden")&&r.removeClass("is-hidden"),e>400&&"none"==d.css("display")?d.fadeIn(300):e<=400&&"none"!=d.css("display")&&d.fadeOut(300),l=e}),f.click(function(e){return e.preventDefault(),t("body,html").animate({scrollTop:0},600),!1}),r.find('[id$="-wrapper"]').each(function(){var e=t(this),a=e.find(".tx-toggle"),o=e.find(".tx-content-slidein").find(".searchquery"),s=a.attr("aria-label");a.click(function(a){a.preventDefault(),e.hasClass("focused")?(n.removeClass("toggle-on"),e.removeClass("focused")):(n.hasClass("toggle-on")?r.find('[id$="-wrapper"]:not(#'+s+"-wrapper)").each(function(){t(this).removeClass("focused")}):n.addClass("toggle-on"),e.addClass("focused").each(function(){"Search"==s&&o.focus()}))})}),t(window).load(function(){var e=0,a=setInterval(function(){e<10&&(t(".iframe-controls--desktop").exists()||t(".iframe-controls--phone-mobile").exists())?(clearInterval(a),p.removeClass("hidden"),t(".tmblr-iframe--loaded").clone().appendTo(h)):10===e&&(clearInterval(a),p.remove()),e++},1e3)})}(jQuery);
