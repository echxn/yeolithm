/*
 * Mimyo Theme by https://yeoli-thm.tumblr.com/
 * Copyright (c) 2021 yeoli-thm
 */
 
!function(t){t.fn.exists=function(){return this.length>0},t.fn.slideIn=function(){return this.show(0,function(){t(this).addClass("active")})},t.fn.slideOut=function(){return this.hide(0,function(){t(this).removeClass("active")})};var e=window.getComputedStyle(document.body).getPropertyValue("--post-photoset-gutter-size"),n=t(window),a=t("body"),s=t("body.index-page-home").exists(),o=t("body.not-index").exists(),i=t("body.manual").exists(),l=t("#topbar"),r=0,d=a.find(".scroll-top-inner"),f=a.find(".scroll-top-button"),c=l.find("#icon_display"),u=c.attr("data-blogname").slice(0,1),p=l.find("#controls-wrapper"),h=p.find("#controls"),m=null,v=null;if(i)var g=".load-more-button",C=!1,y=!1;else g=null,C=400,y=!0;function b(){t("[title]").tooltipster({anchor:"top-left",offset:[14,-18],plugins:["follower"],animationDuration:300,delay:100,maxWidth:160,updateAnimation:null,trigger:"custom",triggerOpen:{click:!0,mouseenter:!0,tap:!1,touchstart:!1},triggerClose:{click:!1,mouseleave:!0,originClick:!1,scroll:!0,tap:!0,touchleave:!0}})}function w(){b(),t.tooltipster.group("tooltip"),a.on("mouseover","#sidebar, .notes",b)}function x(e){t(".ifnt-item:not(.appended)").each(function(){var n=t(this);if(function(e){e.find("figure").each(function(){null==t(this).attr("class")&&null!=t(this).attr("data-orig-width")||null!=t(this).attr("data-tumblr-attribution")?t(this).wrap('<div class="npf-wrap-single"/>'):"tmblr-full"!=t(this).attr("class")||t(this).parents(".npf_row").exists()||null!=t(this).attr("data-tumblr-attribution")||t(this).addClass("npf-item")}),e.find(".npf_row").each(function(){t(this).addClass("npf-item")}),e.find(".npf-item").not(".npf-item + .npf-item").each(function(){t(this).nextUntil(":not(.npf-item)").addBack().wrapAll('<div class="npf-wrap-all"/>')})}(n),s){if(n.hasClass("grid-date")){var o=n,i=o.attr("data-month"),l=o.attr("data-day");i!=m&&(o.find(".gd-month").addClass("new"),e.masonry("layout"),m=i),l!=v&&(o.find(".gd-day").addClass("new"),e.masonry("layout"),v=l)}else if(n.hasClass("grid-thumbnail")){var r=n.attr("data-thumbnailID"),d=t('.gd-overlay[data-overlayID="'+r+'"]'),f=t('.post[id="'+r+'"]'),c=t('.modal-wrapper[data-modalID="'+r+'"]');d.click(function(n){n.preventDefault(),a.addClass("overflow"),f.fadeIn(200,function(){f.photoset(),f.video(e),f.find(".notes-container:not(processed)").exists()&&t.ajax({url:f.attr("data-notesURL"),success:function(t){f.find(".notes-loader").hide(),f.find(".notes-container").html(t).slideDown().addClass("processed")}})})}),c.click(function(e){var n=t(e.target).attr("class");"modal-wrapper"!=n&&"modal-close"!=n||(e.preventDefault(),f.fadeOut(200,function(){a.removeClass("overflow")}))})}}else n.photoset(),n.video(e);return n.shareToggle(),n.addClass("appended"),this})}function k(){t(".npf_row").each(function(){t(this).addClass("clickable")})}if(t.fn.photoset=function(){return this.find(".photo-slideshow:not(.processed)").pxuPhotoset({lightbox:!0,highRes:!0,rounded:!1,exif:!1,captions:!1,gutter:e,photoset:".photo-slideshow",photoWrap:".photo-data",photo:".pxu-photo"})},t.fn.video=function(e){return this.find(".tmblr-embed:not(.processed)").each(function(){var n=t(this);if(n.find(".instagram-media").exists()){if(n.addClass("processed"),s)var a=0,o=setInterval(function(){a<5?(++a,e.masonry("layout")):5===a&&clearInterval(o)},1e3)}else{var i=n.find("iframe").width(),l=n.find("iframe").height(),r=Math.floor(l/i*100)+"%";n.find("iframe").wrap('<div class="vid-resize"/>'),n.find(".vid-resize").css({"padding-Bottom":r}),n.addClass("processed")}})},t.fn.shareToggle=function(){var t=this.find(".share_btn"),e=this.find(".share-wrapper");return t.click(function(n){n.preventDefault(),t.hasClass("on")?(t.removeClass("on"),e.slideOut()):(t.addClass("on"),e.slideIn())})},w(),o)x();else{if(s){x(D=t("#main").masonry({itemSelector:".grid-item",columnWidth:".grid-sizer",gutter:".grid-gutter",fitWidth:!0,hiddenStyle:{transform:"translateY(100px)",opacity:0},visibleStyle:{transform:"translateY(0px)",opacity:1}})),k(),D.imagesLoaded().progress(function(t){D.masonry("layout")}),D.one("layoutComplete",function(){t("#preloader").fadeTo(200,0,function(){t("#main").fadeTo(200,1)}).remove()});var I=D.data("masonry")}else{var D;I=null;x(D=t("#main")),k()}D.infiniteScroll({append:".ifnt-item",path:"a#next",status:".page-load-status",outlayer:I,button:g,scrollThreshold:C,prefill:y}),D.on("append.infiniteScroll",function(e,n,a,s){x(D),t(".npf_row:not(.clickable):not(.disabled)").each(function(){t(this).addClass("disabled")});var o=t(s).map(function(){return t(this).attr("id")}).get();Tumblr.LikeButton.get_status_by_post_ids(o),w()})}c.hasClass("toplogo")&&c.html('<span class="letter">'+u+'</span><span class="dot"></span>'),n.scroll(function(){var e=t(this).scrollTop();e-r>=4&&e>60?l.hasClass("is-hidden")||l.addClass("is-hidden"):(r-e>=4||e<=60)&&l.hasClass("is-hidden")&&l.removeClass("is-hidden"),e>400&&"none"==d.css("display")?d.fadeIn(300):e<=400&&"none"!=d.css("display")&&d.fadeOut(300),r=e}),f.click(function(e){return e.preventDefault(),t("body,html").animate({scrollTop:0},600),!1}),l.find('[id$="-wrapper"]').each(function(){var e=t(this),n=e.find(".tx-toggle"),s=e.find(".tx-content-slidein").find(".searchquery"),o=n.attr("aria-label");n.click(function(n){n.preventDefault(),e.hasClass("focused")?(a.removeClass("toggle-on"),e.removeClass("focused")):(a.hasClass("toggle-on")?l.find('[id$="-wrapper"]:not(#'+o+"-wrapper)").each(function(){t(this).removeClass("focused")}):a.addClass("toggle-on"),e.addClass("focused").each(function(){"Search"==o&&s.focus()}))})}),t(window).load(function(){var e=0,n=setInterval(function(){e<10&&(t(".iframe-controls--desktop").exists()||t(".iframe-controls--phone-mobile").exists())?(clearInterval(n),p.removeClass("hidden"),t(".tmblr-iframe--loaded").clone().appendTo(h)):10===e&&(clearInterval(n),p.remove()),e++},1e3)})}(jQuery);
