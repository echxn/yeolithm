/*
 * Airi Theme by https://yeoli-thm.tumblr.com/
 * Copyright (c) 2021 yeoli-thm
 */
 
!function(t){t.fn.exists=function(){return this.length>0};var e=window.getComputedStyle(document.body),a=e.getPropertyValue("--postPhotosetGutter"),n=Number(e.getPropertyValue("--postWidth").slice(0,-2)),i={background:"rgba(0,0,0,0)",color:"rgb("+e.getPropertyValue("--postAudioPlayerButtonColor")+")"},s=t(window),o=t("body"),l=window.matchMedia("(min-width: 1224px)"),r=t("body.indexpage").exists(),d=t("#pagination.pgnnormal").exists(),c=t("#pagination.pgninfinite").exists(),f=t("#pagination.pgnmanual").exists(),u=t("body.layoutsidecurved").exists(),p=t("body.layoutsidenormal").exists(),h=t('input[name="accordion"]'),m=t("#menubar"),b=m.find("#menubar_content"),g=m.find(".menu_body"),v=t("#header"),x=v.find(".header_body"),C=t(".quicklinks_section"),k=t(".navigation"),w=(t(".blogroll"),t(".faq")),_=t("#totop"),y=o.find(".tmblr-ctrls-wrapper"),D=y.find(".tmblr-ctrls-box");if(f)var T=".manual-btn",P=!1,M=!1;else if(c)T=null,P=400,M=!0;function O(){t("[title]").tooltipster({anchor:"top-left",offset:[14,-18],plugins:["follower"],animationDuration:300,delay:100,maxWidth:160,updateAnimation:null,trigger:"custom",triggerOpen:{click:!0,mouseenter:!0,tap:!1,touchstart:!1},triggerClose:{click:!1,mouseleave:!0,originClick:!1,scroll:!0,tap:!0,touchleave:!0}})}function H(){O(),t.tooltipster.group("tooltip"),o.on("mouseover","#menubar, #header, .notes",O)}function S(){l.matches?(o.hasClass("desktop")||o.removeClass("mobile").addClass("desktop"),(u||p)&&(C.appendTo(x),x.outerHeight()>s.height()?(x.addClass("drag"),v.kinetic("attach")):(x.removeClass("drag"),v.kinetic("detach")))):(o.hasClass("mobile")||o.removeClass("desktop").addClass("mobile"),(u||p)&&(C.prependTo(g),x.hasClass("drag")&&(x.removeClass("drag"),v.kinetic("detach"))))}function q(t){"menu"==t&&g.outerHeight()>s.height()?(g.addClass("drag"),b.kinetic("attach")):(g.removeClass("drag"),b.kinetic("detach"))}function z(t){t.hasClass("measured")||"flex"!=t.find(".post_box").css("display")||t.imagesLoaded(function(){if(t.hasClass("text")){var e=t.find(".pt_body"),a=e.outerHeight();a>n&&a>500&&e.expand(e,a,n)}else{var i=t.find(".captions"),s=t.find(".pt_body").outerHeight()-56,o=i.outerHeight();o>s&&o>180&&(s>=180?i.expand(i,o,s):(s=180,i.expand(i,o,s)))}t.addClass("measured")})}function I(){t(".posts:not(.appended)").each(function(){var e=t(this);if(function(e){e.find("figure").each(function(){null==t(this).attr("class")&&null!=t(this).attr("data-orig-width")||null!=t(this).attr("data-tumblr-attribution")?t(this).wrap('<div class="npf-wrap-single"/>'):"tmblr-full"!=t(this).attr("class")||t(this).parents(".npf_row").exists()||null!=t(this).attr("data-tumblr-attribution")||t(this).addClass("npf-item")}),e.find(".npf_row").each(function(){t(this).addClass("npf-item")}),e.find(".npf-item").not(".npf-item + .npf-item").each(function(){t(this).nextUntil(":not(.npf-item)").addBack().wrapAll('<div class="npf-wrap-all"/>')})}(e),e.photoset(),e.video(),e.audio(),e.hasClass("captionside")&&e.is('.text, [class*="-has-caption"]')&&(z(e),s.resize(function(){z(e)})),e.find("li.share-btn").exists()){var a=e.find("li.share-btn a"),n=e.find("a.share-close"),i=e.find("li.sharebox");a.click(function(t){t.preventDefault(),i.addClass("active")}),n.click(function(t){t.preventDefault(),i.removeClass("active")})}return e.find(".notes-btn a").click(function(a){a.preventDefault();var n=t(this).parents(".notes-btn"),i=e.find(".notes_box"),s=e.find(".hide-notes-btn");n.hasClass("active")?i.slideUp(300,function(){n.tooltipster("content","View notes").removeClass("active")}):(n.tooltipster("content","Hide notes").addClass("active"),i.slideDown(300,function(){i.find(".notes-holder.unprocessed").exists()&&t.ajax({url:e.attr("data-notes-url"),success:function(t){i.find(".notes-loading").hide(),i.find(".notes-holder").html(t).slideDown().removeClass("unprocessed")}})})),s.click(function(t){t.preventDefault(),i.slideUp(300,function(){n.tooltipster("content","View notes").removeClass("active")})})}),e.addClass("appended"),this})}t.fn.mousePosition=function(t){var e=this.offset(),a=this.width(),n=e.top,i=e.left,s=n+a,o=i+a,l=t.pageX,r=t.pageY,d=Math.abs(n-r),c=Math.abs(i-l),f=Math.abs(s-r),u=Math.abs(o-l);switch(Math.min(d,u,f,c)){case d:return"top";case u:return"right";case f:return"bottom";case c:return"left"}},t.fn.photoset=function(){return this.find(".photo-slideshow:not(.processed)").pxuPhotoset({lightbox:!0,highRes:!0,rounded:!1,exif:!1,captions:!1,gutter:a,photoset:".photo-slideshow",photoWrap:".photo-data",photo:".pxu-photo"})},t.fn.video=function(){return this.find(".tmblr-embed:not(.processed)").each(function(){var e=t(this);if(e.find(".instagram-media").exists())e.addClass("processed");else{var a=e.find("iframe").width(),n=e.find("iframe").height(),i=Math.floor(n/a*100)+"%";e.find("iframe").wrap('<div class="vid-resize"/>'),e.find(".vid-resize").css({"padding-Bottom":i}),e.addClass("processed")}})},t.fn.audio=function(){return this.find("iframe.tumblr_audio_player").load(function(){var e=t(this);e.contents().find(".audio-player").css(i).find(".progress").css({background:"rgba(0,0,0,0)"}),e.css({opacity:"1"})})},t.fn.expand=function(e,a,n){return this.each(function(){var e=t(this);e.css({"max-height":n}).append('<div class="expand"><a href="#expand">expand</a></div>'),e.find(".expand a").click(function(n){var i=t(this).parent(".expand");n.preventDefault(),e.animate({"max-height":a},function(){e.css({"max-height":"none"}),i.fadeOut(300).remove()})})})};var V=window.location.hash,W=window.location.href.split("#")[0],B=[];if(t.each(["#message","#about","#navigation","#faq","#blogroll"],function(t,e){V.indexOf(e)>-1&&B.push(e)}),0===B.length)t("#blog__tab").prop("checked",!0);else{var A=B.toString().split("#");t("#"+A[1]+"__tab").prop("checked",!0)}if(h.change(function(){window.location.hash&&history.replaceState(null,null,W)}),H(),"none"!==t(".tab-bg").css("display")&&t("#tabs > label").each(function(){var e=t(this),a=t(this).find(".tab-bg");e.mouseenter(function(e){var n=t(this).mousePosition(e);"top"===n?a.css({top:"-100%",left:0}).animate({top:0},250):"right"===n?a.css({top:0,left:"100%"}).animate({left:0},250):"bottom"===n?a.css({top:"100%",left:0}).animate({top:0},250):"left"===n&&a.css({top:0,left:"-100%"}).animate({left:0},250)}),e.mouseleave(function(e){var n=t(this).mousePosition(e);"top"===n?a.animate({top:"-100%",left:0},250):"right"===n?a.animate({top:0,left:"100%"},250):"bottom"===n?a.animate({top:"100%",left:0},250):"left"===n&&a.animate({top:0,left:"-100%"},250)})}),b.add(v).kinetic({cursor:"default",filterTarget:function(t,e){if(!/down|start/.test(e.type))return!/area|a|input/i.test(t.tagName)}}),b.add(v).kinetic("detach"),S(),s.resize(function(){S()}),m.find('a[class*="-button"]').each(function(){var e=t(this),a=e.attr("data-label"),n=b.find("."+a+"_body");e.click(function(t){t.preventDefault(),o.hasClass(a+"_open")?b.fadeOut(300,function(){o.removeClass(a+"_open"),n.removeClass("visible")}):(o.addClass(a+"_open"),b.fadeIn(500,function(){n.addClass("visible"),q(a),s.resize(function(){q(a),l.matches&&m.hasClass("no-updates")&&b.fadeOut(300,function(){o.removeClass(a+"_open"),n.removeClass("visible")})})}))})}),t('a[href="#message"],a[href="#about"],a[href="#navigation"],a[href="#faq"],a[href="#blogroll"]').click(function(e){e.preventDefault();var a=t(this).attr("href");if(o.hasClass("menu_open")){var n=t(this).parents(".menu_body");b.fadeOut(300,function(){o.removeClass("menu_open"),n.removeClass("visible")})}t(a+"__tab").prop("checked",!0),t("body,html").animate({scrollTop:0},0)}),k.exists()&&k.masonry({itemSelector:".links_box",columnWidth:".links_box",gutter:60,isFitWidth:!0}),w.exists()&&w.find("li").each(function(){var e=t(this).find(".answer");t(this).find(".question").click(function(a){a.preventDefault(),t(this).toggleClass("open"),e.slideToggle(200)})}),I(),t(".npf_row").each(function(){t(this).addClass("clickable")}),r&&!d){var U=t("#main");U.infiniteScroll({path:"a#next",append:"#main .posts",status:".page-load-status",button:T,scrollThreshold:P,prefill:M}),U.on("append.infiniteScroll",function(e,a,n,i){I(),t(".npf_row:not(.clickable):not(.disabled)").each(function(){t(this).addClass("disabled")});var s=t(i).map(function(){return t(this).attr("id")}).get();Tumblr.LikeButton.get_status_by_post_ids(s),H()})}s.scroll(function(){t(this).scrollTop()>600&&"none"==_.css("display")?_.fadeIn(300):t(this).scrollTop()<=600&&"block"==_.css("display")&&_.fadeOut(300)}),_.click(function(){return t("body,html").animate({scrollTop:0},600),!1}),s.load(function(){var e=0,a=setInterval(function(){e<10&&(t(".iframe-controls--desktop").exists()||t(".iframe-controls--phone-mobile").exists())?(clearInterval(a),y.removeClass("hidden"),t(".tmblr-iframe--loaded").clone().appendTo(D)):10===e&&(clearInterval(a),y.remove()),e++},1e3)})}(jQuery);
